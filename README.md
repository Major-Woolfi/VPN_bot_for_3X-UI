# üöÄ VPN Telegram Bot (3X-UI)

Telegram‚Äë–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN‚Äë–ø–æ–¥–ø–∏—Å–∫–∞–º–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π **3X‚ÄëUI Panel**. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä—É—á–Ω—É—é –æ–ø–ª–∞—Ç—É, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö inbounds, —É—á—ë—Ç —Ç—Ä–∞—Ñ–∏–∫–∞, —Ä–µ—Ñ–µ—Ä–∞–ª–∫—É –∏ –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∞–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å ‚Äî –ø—Ä—è–º–æ –≤ Telegram.

–ü—Ä–æ–µ–∫—Ç –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ **Python** –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ —á–µ—Ä–µ–∑ **Docker**.

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üë§ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞—Ä–∏—Ñ–æ–≤ –∏–∑ `data/tarifs.json`
- –ü–æ–∫—É–ø–∫–∞ VPN‚Äë–ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –æ—Å—Ç–∞—Ç–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (sub URL)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- –ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (trial) –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –±–æ–Ω—É—Å–∞–º–∏

### üëë –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±–æ—Ç—É (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∞–∫—Ç–∏–≤–Ω—ã–µ VPN, –±–∞–Ω—ã)
- –†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ / –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–¥–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ Telegram

### üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 3X‚ÄëUI

- –†–∞–±–æ—Ç–∞ —Å–æ –≤—Å–µ–º–∏ –≤–∫–ª—é—á—ë–Ω–Ω—ã–º–∏ **inbounds**
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ **–≤ –∫–∞–∂–¥–æ–º inbound**
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –≤—Å–µ—Ö inbounds –ø–æ base email
- –ü–æ–¥—Å—á—ë—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –∫–∞–∫ —Å—É–º–º—ã –ø–æ –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º
- –ê–≤—Ç–æ‚Äë—Ä–µ–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–æ—Ç—É—Ö—à–∏—Ö —Å–µ—Å—Å–∏—è—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ VLESS / Trojan

---

## üß± –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- Python 3.13+
- aiogram 3.x
- aiosqlite (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- JSON (–æ–∂–∏–¥–∞—é—â–∏–µ –ø–ª–∞—Ç–µ–∂–∏)
- 3X‚ÄëUI Panel API
- asyncio
- aiohttp (API)
- aiofiles

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ tarifs.json
‚îÇ   ‚îú‚îÄ‚îÄ users.db              # —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
‚îÇ   ‚îî‚îÄ‚îÄ await_payments.json   # —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
‚îú‚îÄ‚îÄ logs/                     # —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
‚îÇ   ‚îî‚îÄ‚îÄ YYYY-MM-DD.log
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ deploy_bot.sh
‚îî‚îÄ‚îÄ README.md
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –≤ `.env`.

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```env
BOT_TOKEN=123456:ABCDEF
ADMIN_USER_IDS=123456789,987654321
PANEL_BASE=https://panel.example.com
PANEL_LOGIN=admin
PANEL_PASSWORD=admin_password
SUB_PANEL_BASE=https://panel.example.com/sub/
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```env
PAYMENT_CARD_NUMBER=0000 1111 2222 3333
SITE_URL=https://example.com
TG_CHANNEL=https://t.me/example
SUPPORT_URL=https://t.me/support
VERIFY_SSL=true
DATA_DIR=./data
DATA_FILE=./data/users.db
DATA_AWAIT=./data/await_payments.json
REF_BONUS_DAYS=7
```

---

## üí≥ –õ–æ–≥–∏–∫–∞ –æ–ø–ª–∞—Ç—ã

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–∞—Ä–∏—Ñ.
2. –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –¥–µ–Ω—å–≥–∏ –≤—Ä—É—á–Ω—É—é (–∫–∞—Ä—Ç–∞).
3. –ù–∞–∂–∏–º–∞–µ—Ç ¬´–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É¬ª.
4. –ó–∞–ø—Ä–æ—Å –ø–æ–ø–∞–¥–∞–µ—Ç –≤ `data/await_payments.json`.
5. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –ø–ª–∞—Ç—ë–∂, –∞ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–ª–∞—Ç–µ–∂—É –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–Ω–∏—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–ø—Ä–∞–≤–∏–≤—à–µ–≥–æ –ø–ª–∞—Ç—ë–∂).

---

## üì¶ –¢–∞—Ä–∏—Ñ—ã (–ø—Ä–∏–º–µ—Ä)

| –¢–∞—Ä–∏—Ñ    | –¶–µ–Ω–∞  | IP | –¢—Ä–∞—Ñ–∏–∫ | –°—Ä–æ–∫ |
| -------- | ----- | -- | ------ | ---- |
| Try      | 0 ‚ÇΩ   | 1  | 10 –ì–ë  | 3 –¥–Ω—è |
| –ë–∞–∑–æ–≤—ã–π  | 100 ‚ÇΩ | 2  | 100 –ì–ë | 30 –¥–Ω–µ–π |
| –°—Ç–∞–Ω–¥–∞—Ä—Ç | 200 ‚ÇΩ | 5  | 500 –ì–ë | 30 –¥–Ω–µ–π |
| –ü—Ä–µ–º–∏—É–º  | 300 ‚ÇΩ | 10 | 2 –¢–ë   | 30 –¥–Ω–µ–π |

> ‚ö†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤ **–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ `data/tarifs.json`**.

---

## üîÅ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ 3X‚ÄëUI

- Base email: `user_<telegram_id>@vpn.example`
- –í –∫–∞–∂–¥—ã–π inbound –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç —Å **—Ä–∞–Ω–¥–æ–º–Ω—ã–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –≤ 2 —Å–∏–º–≤–æ–ª–∞**
- –ü—Ä–∏ –ø–æ–∏—Å–∫–µ / —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è base email (–ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é –∞–¥—Ä–µ—Å–∞)
- –¢—Ä–∞—Ñ–∏–∫ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤—Å–µ–º –∏–Ω–±–∞—É–Ω–¥–∞–º

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –æ–±—Ö–æ–¥–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ inbound
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—á–∏—Ç–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫
- –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤

---

## ‚è± –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (–∫–∞–∂–¥—ã–π —á–∞—Å)

–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `expiryTime`, —É–¥–∞–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∏ –æ—á–∏—â–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –≤ –ë–î.

### –û—á–∏—Å—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π (—Ä–∞–∑ –≤ 3 –¥–Ω—è)

–£–¥–∞–ª—è—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π.

---

## üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏

–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º –∏ –≤–∏–¥—è—Ç –ø—Ä–∏—á–∏–Ω—É –±–∞–Ω–∞. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–ª—å–∑—è.

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
pip install -r requirements.txt
python main.py
```

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

- `BOT_TOKEN` –∑–∞–¥–∞–Ω
- 3X‚ÄëUI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–µ—Ç–∏
- –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å/url –ø–∞–Ω–µ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- —Ñ–∞–π–ª `data/tarifs.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

## üê≥ Docker (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π)

1. –û—Ç–∫—Ä–æ–π—Ç–µ `Dockerfile` –∏ `deploy_bot.sh` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–≤–æ–π.
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
./deploy_bot.sh
```

–°–∫—Ä–∏–ø—Ç —Å–∞–º —Å–æ–±–µ—Ä—ë—Ç –æ–±—Ä–∞–∑, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ–¥–Ω–∏–º–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–í–∞–∂–Ω–æ: —Ñ–∞–π–ª—ã `.env` –∏ –ø–∞–ø–∫–∞ `data/` –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü–ª–∞—Ç–µ–∂–∏ **–Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** (–±–µ–∑ API –±–∞–Ω–∫–∞)
- FSM —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (MemoryStorage)
- –û–¥–∏–Ω —Ñ–∞–π–ª ‚Äî –º–æ–Ω–æ–ª–∏—Ç (–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ)

---

## üß† –ò–¥–µ–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ

- –ê–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–∏ (Crypto / YooKassa / Stripe)

---

## ‚ù§Ô∏è –ê–≤—Ç–æ—Ä

–°–¥–µ–ª–∞–Ω–æ —á–µ–ª–æ–≤–µ–∫–æ–º –¥–ª—è –ª—é–¥–µ–π.

–ï—Å–ª–∏ —Ç—ã —ç—Ç–æ —á–∏—Ç–∞–µ—à—å ‚Äî –∑–Ω–∞—á–∏—Ç, –∫–æ–¥ –∂–∏–≤—ë—Ç üòâ
